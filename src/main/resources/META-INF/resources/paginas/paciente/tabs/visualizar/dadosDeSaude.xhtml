<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui">

	<p:accordionPanel value="#{visualizarPacienteBean.paciente.estomias}"
		widgetVar="wdAccordion" varStatus="status" var="estomia"
		multiple="false" activeIndex="0" id="accordion">

		<p:tab>
		
			<p:staticMessage rendered="#{visualizarPacienteBean.paciente!=null}" severity="WARN" detail="#{visualizarPacienteBean.mensagemReavaliacao}" style="margin-bottom:10px" summary="Atenção:"/>

			<f:facet name="title">

				<i class="fa-solid fa-user-doctor"></i>
				<p:outputLabel value=" Estomia - Diagnóstico" />

			</f:facet>

			<div class="ui-fluid formgrid grid">

				<div class="field col-12 md:col-4">
					<p:outputLabel value="Nome do Hospital de Origem" for="@next" />
					<p:inputText readonly="true" value="#{estomia.nomeHospitalOrigem}" />
				</div>

				<div class="field col-12 md:col-3">
					<p:outputLabel value="Nome do Cirugião" for="@next" />
					<p:inputText readonly="true" value="#{estomia.nomeCirurgiao}" />
				</div>

				<div class="field col-12 md:col-2">
					<p:outputLabel value="Data da Cirurgia" for="@next" />
					<p:inputText value="#{estomia.dataCirurgia}" readonly="true">
						<f:convertDateTime pattern="dd/MM/yyyy" />
					</p:inputText>
				</div>

				<div class="field col-12 md:col-3">
					<p:outputLabel value="Diagnóstico" for="@next" />
					<p:inputText value="#{estomia.diagnostico}" readonly="true" />
				</div>

				<div class="field col-12 md:col-2">
					<p:outputLabel value="Cirurgia Realizada" for="@next" />
					<p:inputText value="#{estomia.cirurgiaRealizada}" readonly="true" />
				</div>

				<div class="field col-3">
					<p:outputLabel value="Tipo de Estoma" for="@next" />
					<p:inputText value="#{estomia.tipoEstomia.descricao}"
						readonly="true" />
				</div>

				<div class="field col-3">
					<p:outputLabel value="Classificação de Reversibilidade" for="@next" />
					<p:inputText value="#{estomia.tipoReversibilidade.descricao}"
						readonly="true" />
				</div>
				
				
				<div class="field col-2">
					<p:outputLabel value="Satus da Reversibilidade" for="@next" />
					
					<div class="ui-inputgroup">
					<p:inputText value="#{estomia.statusReversibilidade.descricao}"
						readonly="true" />
						
						<p:commandButton process="@this"
							pt:data-tooltip="Clique para Visualizar o Histórico de Reversibilidade."							
							action="#{visualizarPacienteBean.abrirDlgHistoricoReversibilidade}"
							icon="fa fa-history">
							<f:setPropertyActionListener value="#{estomia}"
								target="#{visualizarPacienteBean.estomiaSelecionada}" />
						</p:commandButton>
					
					</div>
						
				</div>
				
				<div class="field col-2">
					<p:outputLabel value="Data da Reversão" for="@next" />
					<p:calendar value="#{estomia.dataReversao}" mask="99/99/9999" readonly="true"/>									
				</div>				

				<div class="field col-12">
					<p:outputLabel value="Observação" for="@next" />
					<p:inputTextarea value="#{estomia.observacao}" readonly="true" />
				</div>

				<div class="col-12">

					<p:fieldset legend="Itens" id="fielSet">
						<div class="ui-fluid formgrid grid">

							<div class="field col-12 md:col-2">

								<p:outputLabel value="Marca" for="@next" />
								<p:inputText
									value="#{estomia.itemBolsa.produto.marca.descricao}"
									readonly="true" />


							</div>

							<div class="field col-12 md:col-6">

								<p:outputLabel value="Tipo de Bolsa" for="@next" />
								<p:inputText value="#{estomia.itemBolsa.produto.descricao}"
									readonly="true" />


							</div>

							<div class="field col-12 md:col-2">

								<p:outputLabel value="Quantidade" for="@next" />

								<p:inputText value="#{estomia.itemBolsa.quantidade}"
									readonly="true" />

							</div>


							<div class="field col-12 md:col-4">
								<h:panelGroup />
							</div>

							<p:outputPanel styleClass="ui-fluid formgrid grid col-12"
								id="pnlAddAdjuvante" rendered="#{not empty estomia.adjuvantes}">

								<ui:repeat var="adjuvante" value="#{estomia.adjuvantes}">

									<div class="field col-12 md:col-6">
										<p:outputLabel value="Adjuvante" for="@next" />
										<p:inputText value="#{adjuvante.produto.descricao}"
											readonly="true" />
									</div>

									<div class="field col-12 md:col-2">
										<p:outputLabel value="Quantidade" for="@next" />
										<p:inputText value="#{adjuvante.quantidade}" readonly="true" />
									</div>

									<div class="field col-12 md:col-2">

										<p:outputLabel value="Recorrência" for="@next" />
										<p:inputText value="#{adjuvante.recorrencia.descricao}"
											readonly="true" />

									</div>

								</ui:repeat>
							</p:outputPanel>
							
							
							<p:outputPanel styleClass="ui-fluid formgrid grid col-12"
								id="pnlAddBolsaTeste" rendered="#{not empty estomia.bolsasTeste}">
								
								<p:separator style="width:100%;height:10px"/>
								<p:outputLabel value="BOLSAS DE TESTE" style="font-weight:bold!important;margin-left:50%"/>								
								<p:separator style="width:100%;height:10px"/>

								<ui:repeat var="bolsaTeste" value="#{estomia.bolsasTeste}">

									<div class="field col-12 md:col-3">

										<p:outputLabel value="Marca da Bolsa de Teste:" for="@next" />
										<p:inputText value="#{bolsaTeste.produto.marca.descricao}" readonly="true" />

									</div>


									<div class="field col-12 md:col-6">
										<p:outputLabel value="Tipo de Bolsa de Teste:" for="@next" />	
										<p:inputText value="#{bolsaTeste.produto.descricaoReduzida}" readonly="true" />										
									</div>

									<div class="field col-12 md:col-2">
										<p:outputLabel value="Quantidade:" for="@next" />										
										<p:inputText value="#{bolsaTeste.quantidade}" id="qtdBolsaTeste" readonly="true"
												onkeypress="if(event.keyCode == 13){ event.preventDefault(); return false; }"
												disabled="#{estomia.desabilitaCamposEdicao or seguranca.naoPodeEditarDadosSaudeDoPaciente}" />
									</div>									

								</ui:repeat>
							</p:outputPanel>							
							
							
						</div>
					</p:fieldset>

				</div>

			</div>


		</p:tab>
	</p:accordionPanel>



</ui:composition>